<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_partner_property_form_pattern" model="ir.ui.view">
        <field name="name">res.partner.property.form.pattern</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <field name="category_id" position="after">
                <field name="birthday"/>
            </field>
            <xpath expr="//page[@name='sales_purchases']/group[@name='container_row_2']/group[@name='sale']/field[@name='user_id']" position="before">
                <field name="active_customer"/>
            </xpath>
            <xpath expr="//page[@name='sales_purchases']/group[@name='container_row_2']/group[@name='purchase']" position="inside">
                <field name="active_supplier" sequence="1"/>
            </xpath>
            <xpath expr="//sheet/div[@class='oe_title mb24']/h1" position="replace">
                <h1>
                    <field name="name" attrs="{'invisible': True}"/>
                    <field name="names" default_focus="1" placeholder="Name" attrs="{'required' : [('type', '=', 'contact')]}"/>
                    <field name="last_name" placeholder="Last name" attrs="{'invisible': [('is_company','=', True)]}"/>
                </h1>
            </xpath>


        </field>
    </record>

    <record id="pe_partner_address_form_inherit" model="ir.ui.view">
        <field name="name">pe.partner.form.address.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="l10n_pe.pe_partner_address_form"/>
        <field name="arch" type="xml">
            <field name="l10n_pe_district" position="replace">
            </field>
            <field name="city_id" position="replace">
            </field>
            <field name="state_id" position="replace">
            </field>
            
            <field name="country_id" position="attributes">
                <attribute name="attrs">{'required': [('company_type','=','company_id')]}</attribute>
            </field>
            
            <field name="country_id" position="after">
                <field name="ubigeo_required" invisible="1"/>
                <field name="company_type" invisible="1" options="{'horizontal': true}" class="oe_edit_only" widget="radio"/> <!-- groups="base.group_no_one"-->
                <field name="state_id" placeholder="Department..." attrs="{'required': [('company_type','=','company_id'), ('ubigeo_required','=','S')]}"/>
                <field name="city_id" placeholder="Province..." domain="[('state_id','=', state_id)]" options="{'no_quick_create': true,'no_create_edit' : true,'no_open': True}" attrs="{'required': [('company_type','=','company_id'), ('ubigeo_required','=','S')]}"/>

                <field name="l10n_pe_district" placeholder="District..." domain="[('city_id','=', city_id)]" options="{'no_quick_create': true,'no_create_edit' : true,'no_open': True}" attrs="{'required': [('company_type','=','company_id'), ('ubigeo_required','=','S')]}"/>
            </field>
            
            <xpath expr="//field[@name='street']" position="attributes">
                <attribute name="attrs">{'required': [('company_type','=','company_id')]}</attribute>
                <attribute name="placeholder">street address...</attribute>
            </xpath>

        </field>
    </record>

    <record id="view_partner_latam_form_inherit" model="ir.ui.view">
        <field name="name">view.partner.latam.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="l10n_latam_base.view_partner_latam_form"/>
        <field name="arch" type="xml">
            <field name="l10n_latam_identification_type_id" position="replace">
            </field>
            <xpath expr="//div/field[@name='vat']" position="replace">
            </xpath>
            <xpath expr="//label[@for='l10n_latam_identification_type_id']" position="replace">
            </xpath>

            <field name="type" position="before">
                <label for="l10n_latam_identification_type_id" string="Identification Number"/>
                <div>
                    <field name="l10n_latam_identification_type_id" options="{'no_open': True, 'no_create': True}" placeholder="Type" attrs="{'readonly': [('parent_id','!=',False)]}" class="oe_inline" domain="country_id and ['|', ('country_id', '=', False), ('country_id', '=', country_id)] or []" required="True"/>
                    <span class="oe_read_only"> - </span>
                    <field name="vat" placeholder="Number..." class="oe_inline" attrs="{'readonly': [('parent_id','!=',False)], 'required': [('company_type','=','company_id')]}"/>
                </div>
            </field>
        </field>
    </record>
    <record id="res_partner_custom_view_search" model="ir.ui.view">
        <field name="name">res.partner.search.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account.res_partner_view_search"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='customer']" position="replace">
                <filter string="Clientes" name="active_customer" domain="[('active_customer','=', True)]"/>
            </xpath>
            <xpath expr="//filter[@name='supplier']" position="replace">
                <filter string="Proveedores" name="active_supplier" domain="[('active_supplier','=', True)]"/>
                <separator/>
            </xpath>
        </field>
    </record>
    <record id="account.res_partner_action_customer" model="ir.actions.act_window">
        <field name="context">{'search_default_active_customer': 1,'res_partner_search_mode': 'customer', 'default_is_company': True, 'default_customer_rank': 1}</field>
    </record>
    <record id="account.res_partner_action_supplier" model="ir.actions.act_window">
        <field name="context">{'search_default_active_supplier': 1,'res_partner_search_mode': 'customer', 'default_is_company': True, 'default_customer_rank': 1}</field>
    </record>
</odoo>
