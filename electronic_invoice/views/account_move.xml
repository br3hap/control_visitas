<odoo>
  <data>

    <record id="view_invoice_tree_inherit" model="ir.ui.view">
        <field name="name">view.invoice.tree.inherit</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_invoice_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="after">
                <field name="shipping_status_sunat" optional="1"/>
            </xpath>
        </field>
    </record>

    <record id="view_move_form_inherit" model="ir.ui.view">
        <field name="name">view.move.form.inherit</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">

            <xpath expr="//button[@name='action_post']" position="after">
                <button name="send_invoice"
                string="Send to Sunat" 
                class="oe_highlight"           
                type="object"
                attrs="{'invisible':[('shipping_status_sunat', 'not in', [1, 2, 4, 7, 8])]}"/>

                <field name='not_active_get_print_invoice' invisible="1"/>

                <button name="get_invoice_ebis"
                string="Get Invoice of EBIS" 
                class="oe_highlight"           
                type="object"
                attrs="{'invisible':['|', ('shipping_status_sunat', 'not in', [5,6,3]),
                                    ('not_active_get_print_invoice', '=', True)]}"/>

                <button name="button_send_low"
                string="Send Low" 
                class="oe_highlight"           
                type="object"
                attrs="{'invisible':[('shipping_status_sunat', 'not in', [3, 5, 6])]}"/>
                <!--attrs="{'invisible':['|', ('move_type','not in',['out_invoice', 'out_refund']),
                                     ('state','!=','posted')]}"/>-->

                <button name="button_list_logs"
                string="List of Logs" 
                class="oe_highlight"           
                type="object"
                attrs="{'invisible':['|', ('move_type','not in',['out_invoice', 'out_refund']),
                                     ('state','!=','posted')]}"/>
        </xpath>

        <xpath expr="//field[@name='ref']" position="after">
                <field name="codigo_compra"
                attrs="{'invisible':[('move_type','not in',['out_invoice', 'out_refund'])],
                        'readonly':[('state','in',['posted', 'cancel'])]}"/>

                <field name="tipo_pago"/>

                <field name="shipping_status_sunat"
                readonly="1"
                attrs="{'invisible':[('move_type','not in',['out_invoice', 'out_refund'])]}"/>

                <field name="file_data" readonly="1" filename="field_pdf"
                attrs="{'invisible':[('move_type','not in',['out_invoice', 'out_refund'])]}"/>
                <field name="field_pdf" invisible="1"/>
                
                <field name="file_data_xml" readonly="1" filename="field_xml"
                attrs="{'invisible':[('move_type','not in',['out_invoice', 'out_refund'])]}"/>
                <field name="field_xml" invisible="1"/>

        </xpath>

	    <xpath expr="//field[@name='journal_id']" position="attributes">
                <attribute name="groups"></attribute>
        </xpath>
        
        <xpath expr="//page[@name='other_info']" position="after">
            <page string="Observaciones" name="observaciones">
                <field name="observaciones" string="Observaciones" placeholder="Observaciones"
                attrs="{'readonly':[('state','in',['posted', 'cancel'])]}"/>
            </page>
            <page string="Documentos Relacionados">
                    <field name="documentos" widget="one2many_list">
                        <tree editable="top">
                            <field name="tipo" 
                            options="{'no_quick_create': true,'no_create_edit' : true,'no_open': True}"/>
                            <field name="serie"/>
                            <field name="correlativo"/>
                        </tree>
                    </field>
            </page>
        </xpath>

        </field>
    </record>

  </data>
</odoo>
