<odoo>
  <data>

    <record id="view_invoice_tree_cuotas" model="ir.ui.view">
        <field name="name">view.invoice.tree.cuotas</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_invoice_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="after">
                <field name="pago_credito" optional="1"/>
            </xpath>
        </field>
    </record>

    <record id="view_move_form_cuotas" model="ir.ui.view">
        <field name="name">view.move.form.cuotas</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">

        <xpath expr="//field[@name='ref']" position="after">
                <field name="pago_credito"/>
        </xpath>
        
        <xpath expr="//page[@name='other_info']" position="after">
            <page string="Cuotas" name="cuotas"
                attrs="{'invisible':[('pago_credito','!=', True)]}">

                <field name="cuotas" widget="one2many_list"
                attrs="{'readonly':[('state','in',['posted', 'cancel'])]}">
                    <tree editable="top">
                        <field name="name"/>
                        <field name="amount"/>
                        <field name="date"/>
                    </tree>
                </field>

            </page>
        </xpath>

        </field>
    </record>

  </data>
</odoo>
