<odoo>
    <data>

        <record id="view_invoice_tree_inherit" model="ir.ui.view">
            <field name="name">view.invoice.tree.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_invoice_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='state']" position="after">
                    <field name="active_detraction" invisible="1"/>
                </xpath>
                
            </field>
        </record>

        <record id="view_move_form_inherit" model="ir.ui.view">
            <field name="name">view.move.form.inherit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">

                <xpath expr="//div[@name='journal_div']" position="after">
                    <field name="active_detraction" 
                    attrs="{'readonly':[('state','!=','draft')],
                            'invisible':[('move_type', '=','entry')]}"/>

                     <field name="service_detraction"
                    options="{'no_quick_create': true,'no_create_edit' : true,'no_open': True}" 
                    attrs="{'invisible':[('active_detraction', '=',False)],
                            'readonly':[('state','!=','draft')]}"/>
                </xpath>
                
                <xpath expr="//page[@id='other_tab_entry']" position="after">
                    <page string="Information of Detraction" attrs="{'invisible':[('active_detraction', '=',False)]}">
                        <group>

                            <field name="type_paid_detraction" 
                            options="{'no_quick_create': true,'no_create_edit' : true,'no_open': True}" 
                            attrs="{'required':[('active_detraction', '=',True)],
                                    'invisible':[('active_detraction', '=',False)],
                                    'readonly':[('state','!=','draft')]}"/>

                            <field name="type_operation_detraction" 
                            options="{'no_quick_create': true,'no_create_edit' : true,'no_open': True}" 
                            attrs="{'required':[('active_detraction', '=',True),('move_type','=','in_invoice')],
                                    'invisible':['|',('active_detraction', '=',False),('move_type','=','out_invoice')],
                                    'readonly':[('state','!=','draft')]}"/>


                            <field name="detraction_date" 
                            attrs="{'invisible':['|',('active_detraction', '=',False),('move_type','=','out_invoice')]}"/>

                            <field name="operation_number_detraction" 
                            attrs="{'invisible':['|',('active_detraction', '=',False),('move_type','=','out_invoice')]}"/>

                            <field name="active_round_amount" 
                            attrs="{'invisible':[('active_detraction', '=',False)],
                            'readonly':[('state','!=','draft')]}"/>

                            <field name="active_sale_auto_detraction" 
                            attrs="{'invisible':[('active_detraction', '=',False),('move_type', '!=', 'out_invoice')]}"/>

                        </group>

                    </page>
                </xpath>
                
                <xpath expr="//field[@name='amount_residual']" position="after">
                    <field name="rate_detraction"
                    attrs="{'invisible':[('active_detraction', '=',False)]}"/>
                    <field name="amount_detraction"
                    attrs="{'invisible':[('active_detraction', '=',False)]}"/>
                </xpath>

            </field>
        </record>

    </data>
</odoo>